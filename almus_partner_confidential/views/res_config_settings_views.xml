<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_almus_partner_confidential_res_config_settings" model="ir.ui.view">
        <field name="name">almus.partner_confidential.res.config.settings.form</field>
        <field name="model">res.config.settings</field>
        <field name="inherit_id" ref="almus_base.view_almus_base_res_config_settings"/>
        <field name="arch" type="xml">
            <xpath expr="//block[@name='almus_app_settings']" position="inside">
                <block title="Información Confidencial de Contactos" name="almus_partner_confidential_block">
                    <setting id="almus_partner_confidential_settings" 
                             string="Activar Información Confidencial"
                             help="Habilita la pestaña de información confidencial en los contactos">
                        <field name="almus_partner_confidential_enabled"/>
                    </setting>
                    
                    <!-- Información sobre la funcionalidad -->
                    <div class="text-muted mb-3">
                        <p>
                            <i class="fa fa-shield text-info"/> Este módulo agrega una pestaña "Información Confidencial" en el formulario de contactos
                            que solo es visible para usuarios con el permiso correspondiente.
                        </p>
                        <p class="mb-0">
                            <strong>Campos protegidos:</strong> Nombre internacional, WeChat ID, WhatsApp, 
                            términos de pago, condiciones de precios, información bancaria y notas internas.
                        </p>
                    </div>
                    
                    <!-- Instrucciones para administradores -->
                    <div class="o_setting_box">
                        <div class="o_setting_box_title">
                            <strong>¿Cómo otorgar acceso?</strong>
                        </div>
                        <div class="text-muted">
                            <ol class="mb-0">
                                <li>Ir a Configuración → Usuarios y Compañías → Usuarios</li>
                                <li>Seleccionar el usuario deseado</li>
                                <li>En la pestaña "Permisos de Acceso"</li>
                                <li>En la sección "Información Confidencial de Contactos"</li>
                                <li>Marcar "Ver Información Confidencial" (solo lectura) o "Administrar Información Confidencial" (lectura y escritura)</li>
                            </ol>
                        </div>
                    </div>
                </block>
            </xpath>
        </field>
    </record>
</odoo>